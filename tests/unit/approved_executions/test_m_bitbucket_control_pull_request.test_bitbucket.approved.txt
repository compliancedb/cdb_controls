Getting pull requests from https://api.bitbucket.org/2.0/repositories/acme/road-runner/commit/abc50c8a53f79974d615df335669b59fb56a4ed3/pullrequests
Pull requests response: {'values': [{'links': {'self': {'href': 'test_self_uri', 'name': 'test_self'}, 'html': {'href': 'test_html_uri', 'name': 'test_html'}}, 'id': '1', 'title': 'test pull request'}], 'state': 'OPEN', 'participants': [{'approved': True, 'state': 'approved', 'user': {'display_name': 'test_username'}}]}
Found pull request info: [{'pullRequestMergeCommit': 'abc50c8a53f79974d615df335669b59fb56a4ed3', 'pullRequestURL': 'test_html_uri', 'pullRequestState': 'OPEN', 'approvers': 'test_username'}]
{'evidence_type': 'pull_request', 'contents': {'is_compliant': True, 'url': 'https://bitbucket.org/acme/road-runner', 'description': 'Bitbucket pull request', 'source': [{'pullRequestMergeCommit': 'abc50c8a53f79974d615df335669b59fb56a4ed3', 'pullRequestURL': 'test_html_uri', 'pullRequestState': 'OPEN', 'approvers': 'test_username'}]}}
Docker image digest found from environment variable
IMAGE DIGEST: aacdaef69c676c2466571d3288880d559ccc2032b258fc5e73f99a103db462ee
Putting this payload:
{
    "contents": {
        "description": "Bitbucket pull request",
        "is_compliant": true,
        "source": [
            {
                "approvers": "test_username",
                "pullRequestMergeCommit": "abc50c8a53f79974d615df335669b59fb56a4ed3",
                "pullRequestState": "OPEN",
                "pullRequestURL": "test_html_uri"
            }
        ],
        "url": "https://bitbucket.org/acme/road-runner"
    },
    "evidence_type": "pull_request"
}
To this url: https://app.compliancedb.com/api/v1/projects/acme/road-runner/artifacts/aacdaef69c676c2466571d3288880d559ccc2032b258fc5e73f99a103db462ee
DRY RUN: Put not sent
