Getting pull requests from https://api.bitbucket.org/2.0/repositories/test_project/test_repo/commit/12037940e4e7503055d8a8eea87e177f04f14616/pullrequests
Pull requests response: {'values': [{'links': {'self': {'href': 'test_self_uri', 'name': 'test_self'}, 'html': {'href': 'test_html_uri', 'name': 'test_html'}, 'commits': {'href': 'test_commit_uri', 'name': 'test_commits'}, 'approve': {'href': 'test_approve_uri', 'name': 'test_approve'}, 'diff': {'href': 'test_diff_uri', 'name': 'test_diff'}, 'diffstat': {'href': 'test_diffstat_uri', 'name': 'test_diffstat'}, 'comments': {'href': 'test_comments_uri', 'name': 'test_comments'}, 'activity': {'href': 'test_activity_uri', 'name': 'test_activity'}, 'merge': {'href': 'test_merge_uri', 'name': 'test_merge'}, 'decline': {'href': 'test_decline_uri', 'name': 'test_decline'}}, 'id': '1', 'title': 'test pull request'}], 'state': 'OPEN', 'participants': [{'role': 'PARTICIPANT', 'approved': True, 'state': 'approved', 'user': {'display_name': 'test_username'}}]}
Found pull request info: [{'pullRequestMergeCommit': '12037940e4e7503055d8a8eea87e177f04f14616', 'pullRequestURL': 'test_html_uri', 'pullRequestState': 'OPEN', 'approvers': 'test_username'}]
{'evidence_type': 'pull_request', 'contents': {'is_compliant': True, 'url': 'https://bitbucket.org/test_project/test_repo', 'description': 'Bitbucket pull request', 'source': [{'pullRequestMergeCommit': '12037940e4e7503055d8a8eea87e177f04f14616', 'pullRequestURL': 'test_html_uri', 'pullRequestState': 'OPEN', 'approvers': 'test_username'}]}}
Docker image digest found from environment variable
IMAGE DIGEST: b7cdaef69c676c2466571d3233380d559ccc2032b258fc5e73f99a103db462ef
Putting this payload:
{
    "contents": {
        "description": "Bitbucket pull request",
        "is_compliant": true,
        "source": [
            {
                "approvers": "test_username",
                "pullRequestMergeCommit": "12037940e4e7503055d8a8eea87e177f04f14616",
                "pullRequestState": "OPEN",
                "pullRequestURL": "test_html_uri"
            }
        ],
        "url": "https://bitbucket.org/test_project/test_repo"
    },
    "evidence_type": "pull_request"
}
To this url: https://app.compliancedb.com/api/v1/projects/compliancedb/cdb-controls-test-pipeline/artifacts/b7cdaef69c676c2466571d3233380d559ccc2032b258fc5e73f99a103db462ef
DRY RUN: Put not sent
